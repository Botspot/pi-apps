#!/bin/bash

# Version
version=3.0.0

# Install
if [ "${arch}" = "64" ]; then
    url_arch=arm64
else
    url_arch=armhf
fi
url="https://gitea.thebrokenrail.com/minecraft-pi-reborn/minecraft-pi-reborn/releases/download/${version}/minecraft-pi-reborn-${version}-${url_arch}.AppImage"

# Common Code
source "$(dirname "$0")/common.sh"

# Download File
wget -O "${APPIMAGE}" "${url}" || error 'Failed to download AppImage'
chmod +x "${APPIMAGE}"

# Enable FUSE (Needed For AppImages)
enable_module fuse || error 'Failed to enable FUSE'

# Make Desktop File
"${APPIMAGE}" --install-desktop-entry || error 'Failed to create desktop entry'
